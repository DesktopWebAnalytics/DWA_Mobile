<?xml version="1.0" encoding="utf-8"?>
<!--
	DWA_Mobile

	Link http://www.desktop-web-analytics.com
	Link https://github.com/DesktopWebAnalytics
	Licence http://www.gnu.org/licenses/gpl-3.0-standalone.html GPL v3 or later

	$Id: Home.mxml 237 2011-12-15 15:25:06Z benoit $
-->
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
				 xmlns:s="library://ns.adobe.com/flex/spark"
				 title="{resourceManager.getString('piwik', 'SitesManager_MenuSites')}"
				 viewActivate="initView()" destructionPolicy="never">
	<fx:Script>
		<![CDATA[
			import com.dwa.common.profile.Profile;
			
			import mx.collections.ArrayList;
			import mx.core.FlexGlobals;
			
			import spark.formatters.DateTimeFormatter;
			
			private function initView():void{
				trace("view home");
				if(FlexGlobals.topLevelApplication.isTablet && !FlexGlobals.topLevelApplication.showBackButton) this.stage.displayState = StageDisplayState.NORMAL;
				
				websitesList.dataProvider = new ArrayList(data as Array);
			}
			private function selectWebsite():void{
				var selectedWebsite:Profile = websitesList.selectedItem;
				
				navigator.pushView(Dashboard, selectedWebsite);
			}
			
			private function addWebsite():void{
				navigator.pushView(CreateProfile);
			}
			
			private function help():void{
				navigator.pushView(About);
			}
			
			
		]]>
	</fx:Script>
	<fx:Declarations>
		<!-- Placer ici les éléments non visuels (services et objets de valeur, par exemple). -->
	</fx:Declarations>
	
	<s:navigationContent>
		<s:Button styleName="buttonInfo" click="help()">
			<s:icon>
				<s:MultiDPIBitmapSource source160dpi="@Embed('assets/icons/low/ic_menu_info_details.png')"
										source240dpi="@Embed('assets/icons/med/ic_menu_info_details.png')"
										source320dpi="@Embed('assets/icons/high/ic_menu_info_details.png')" />
			</s:icon>
		</s:Button>
	</s:navigationContent>
	
	<s:actionContent>
		<s:Button styleName="buttonAdd" click="addWebsite()">
			<s:icon>
				<s:MultiDPIBitmapSource source160dpi="@Embed('assets/icons/low/ic_menu_add.png')"
										source240dpi="@Embed('assets/icons/med/ic_menu_add.png')"
										source320dpi="@Embed('assets/icons/high/ic_menu_add.png')" />
			</s:icon>
		</s:Button>
	</s:actionContent>
	
	<s:List id="websitesList" width="100%" height="100%" horizontalScrollPolicy="off" change="selectWebsite()">
		<s:itemRenderer>
			<fx:Component>
				<s:IconItemRenderer width="100%" height="80" iconFunction="getIcon" iconWidth="48" iconHeight="48" labelField="websiteName" messageField="websiteUrl" >
					<fx:Script>
						<![CDATA[
							
							private function getIcon(item:Object):String{
								return "assets/72x72a.png";
							}
						]]>
					</fx:Script>
					<s:decorator>
						<s:MultiDPIBitmapSource source160dpi="@Embed('assets/icons/low/ic_media_play.png')"
												source240dpi="@Embed('assets/icons/med/ic_media_play.png')"
												source320dpi="@Embed('assets/icons/high/ic_media_play.png')" />
					</s:decorator>
				</s:IconItemRenderer>
			</fx:Component>
		</s:itemRenderer>
	</s:List>
</s:View>
